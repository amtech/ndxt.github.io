<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
    <title>南大先腾开源计划 | 技术路线</title>
    <meta name="description" content="南大先腾开源计划">
    
    <link rel="preload" href="/assets/css/30.styles.c31d749a.css" as="style"><link rel="preload" href="/assets/js/app.a7a3e132.js" as="script"><link rel="preload" href="/assets/js/1.f4de65d5.js" as="script"><link rel="prefetch" href="/assets/js/10.323632ae.js"><link rel="prefetch" href="/assets/js/0.68808d85.js"><link rel="prefetch" href="/assets/js/2.a3da1193.js"><link rel="prefetch" href="/assets/js/3.2e4bcebc.js"><link rel="prefetch" href="/assets/js/4.13aa9616.js"><link rel="prefetch" href="/assets/js/5.a8e715ab.js"><link rel="prefetch" href="/assets/js/6.15f5edf2.js"><link rel="prefetch" href="/assets/js/7.7253fe14.js"><link rel="prefetch" href="/assets/js/8.73e09b78.js"><link rel="prefetch" href="/assets/js/9.060de31d.js"><link rel="prefetch" href="/assets/js/11.02edc5b1.js"><link rel="prefetch" href="/assets/js/12.81abd8cd.js"><link rel="prefetch" href="/assets/js/13.c35e3267.js"><link rel="prefetch" href="/assets/js/14.a2be0c73.js"><link rel="prefetch" href="/assets/js/15.61195538.js"><link rel="prefetch" href="/assets/js/16.5534e4e3.js"><link rel="prefetch" href="/assets/js/17.516b2613.js"><link rel="prefetch" href="/assets/js/18.948e9591.js"><link rel="prefetch" href="/assets/js/19.59a20f04.js"><link rel="prefetch" href="/assets/js/20.01a7df14.js"><link rel="prefetch" href="/assets/js/21.6af34829.js"><link rel="prefetch" href="/assets/js/22.45356f8d.js"><link rel="prefetch" href="/assets/js/23.a542d84a.js"><link rel="prefetch" href="/assets/js/24.167d8698.js"><link rel="prefetch" href="/assets/js/25.7217b4b5.js"><link rel="prefetch" href="/assets/js/26.23760709.js"><link rel="prefetch" href="/assets/js/27.adad4ec7.js"><link rel="prefetch" href="/assets/js/28.05792ad5.js"><link rel="prefetch" href="/assets/js/29.84e15c3e.js">
    <link rel="stylesheet" href="/assets/css/30.styles.c31d749a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/" class="router-link-active"><!----><span class="site-name">
      南大先腾开源计划
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/system_design/" class="nav-link router-link-active">总体设计</a></div><div class="nav-item"><a href="/projects/" class="nav-link">相关项目</a></div><div class="nav-item"><a href="/UPDATE_LOG.html" class="nav-link">更新记录</a></div><!----></nav></div></header><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/system_design/" class="nav-link router-link-active">总体设计</a></div><div class="nav-item"><a href="/projects/" class="nav-link">相关项目</a></div><div class="nav-item"><a href="/UPDATE_LOG.html" class="nav-link">更新记录</a></div><!----></nav><ul class="sidebar-links"><li><a href="/system_design/technical_design.html" class="active sidebar-link">技术路线</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/system_design/technical_design.html#统一技术栈" class="sidebar-link">统一技术栈</a></li><li class="sidebar-sub-header"><a href="/system_design/technical_design.html#前后端数据通讯格式" class="sidebar-link">前后端数据通讯格式</a></li><li class="sidebar-sub-header"><a href="/system_design/technical_design.html#参数驱动sql" class="sidebar-link">参数驱动SQL</a></li><li class="sidebar-sub-header"><a href="/system_design/technical_design.html#数据持久化" class="sidebar-link">数据持久化</a></li><li class="sidebar-sub-header"><a href="/system_design/technical_design.html#mvc分层设计和脚手架" class="sidebar-link">MVC分层设计和脚手架</a></li></ul></li><li><a href="/system_design/concept_design.html" class="sidebar-link">概念设计</a></li><li><a href="/system_design/product_design.html" class="sidebar-link">产品设计</a></li></ul></div><div class="page"><div class="content"><h1 id="技术路线"><a href="#技术路线" aria-hidden="true" class="header-anchor">#</a> 技术路线</h1><p>技术方面既要跟上快速的发展步伐又要减少学习成本同事还要兼顾开发人员的使用习惯，本身就是一个非常矛盾的事情；也是没有办法做到尽善尽美的。框架在技术方面的目标是让开发人员不需要学习太多的新的技术就可以使用框架，比如你不需要知道spring security的机制和原理，只要按照框架的约定开发，就已经应用了这个安全框架；让开发人员把跟多的精力集中在业务的理解和实现上。框架的设计理念和spring boot 非常相像，没有直接采用spring boot 的原因是在框架设计之初spring boot还没有流行，我们还不知道有这个东西；现在我们的框架已经将所有的配置信息和业务代码剥离可以直接一直到spring boot项目中。</p><p>技术体系设计主要考虑一下内容：</p><ol><li><p>统一的功能权限、数据范围权限控制。</p></li><li><p>统一的用户、机构及关联关系，目的是为了统一实现工作流程设定。</p></li><li><p>统一技术栈，减少员工的交流成本。技术栈在满足业务需求的情况下尽量减少，并且适当找过开发人员的使用习惯。</p></li><li><p>不重复发明轮子，但也不为此而对业务需求进行妥协。</p></li></ol><p><strong>特别说明一下第4点，框架更多的是一个代码联合剂将众多开源平台整合在一起、所以某种意义上也可以说框架是一个学习教程。但是我们还是在两个方面发明了自己的轮子，一：参数驱动sql 二：工作流引擎，具体原因参见对应的章节。</strong></p><h2 id="统一技术栈"><a href="#统一技术栈" aria-hidden="true" class="header-anchor">#</a> 统一技术栈</h2><h3 id="框架平台的技术路线"><a href="#框架平台的技术路线" aria-hidden="true" class="header-anchor">#</a> 框架平台的技术路线</h3><p>框架经过多少改版，现在基本上全面拥抱spring体系，并且可以很容易的迁移到spring boot。框架现在是4.0版本，相比3.×最大的变化就是前后端分离，前端页面显示和后端的逻辑设计完全分离。</p><h3 id="前端技术路线"><a href="#前端技术路线" aria-hidden="true" class="header-anchor">#</a> 前端技术路线</h3><p>目前前端有一套基于<a href="https://github.com/ndxt/centit-ui/tree/master/framework-base-view-easyui" target="_blank" rel="noopener noreferrer">easyui</a>的框架，正在研发一套基于vue的框架。</p><h3 id="后端技术路线"><a href="#后端技术路线" aria-hidden="true" class="header-anchor">#</a> 后端技术路线</h3><p>后端采用的主要技术栈如下：</p><ol><li>基本算法类采用 apache commons系列。</li><li><a href="https://github.com/ndxt/centit-commons" target="_blank" rel="noopener noreferrer">centit-commons</a> 作为基础算法的补充，其中最为重要的是<a href="https://github.com/ndxt/centit-commons/tree/master/centit-compiler" target="_blank" rel="noopener noreferrer">compiler</a>一个简化四则运算作为框架的规则引擎使用。</li><li>采用fastjson作为json的解析工具。</li><li>采用spring作为bean的容器和事务管理工具，spring mvc作为后端分层模型，spring security作为安全框架。spring 采用4.×版本。</li><li>持久化公司<a href="https://github.com/ndxt/centit-persistence" target="_blank" rel="noopener noreferrer"><strong>centit-persistence</strong></a>工具类对spring-jdbc、Mybatis、Hibernate进行封装，使其都可以支持 参数驱动sql。推荐使用<a href="https://github.com/ndxt/centit-persistence/tree/master/centit-persistence-jdbc" target="_blank" rel="noopener noreferrer">centit-persistence-jdbc</a>它用sping jdbc实现了jpa使用和hibernate一样便捷，并且查询更加灵活。</li><li>采用json格式作为前后端的数据通讯格式。</li><li>采用restful风格的接口规范。</li></ol><h2 id="前后端数据通讯格式"><a href="#前后端数据通讯格式" aria-hidden="true" class="header-anchor">#</a> 前后端数据通讯格式</h2><p>框架现在是4.0版本，相比3.×最大的变化就是前后端分离，前端页面显示和后端的逻辑设计完全分离，部署在不同的服务容器上。框架强力建议前段采用html+js（或者js框架比如 easyui、vue等等）的静态方案，但是这并不是强制，开发依然可以使用jsp、velocity等等前段解决方案，但是要求前段必须单独一个服务。这样做的目的是要求开发组将后端的业务通过接口的方式抽象出来，好处是不同平台的客户端，pc端、iOS、Android等等可以用共同的后端。减少后期的维护成本。</p><p>后端采用restful风格的接口，前后端用json的数据格式交换。后端除了返回单个数字、字符串、布尔型等标量其他的json都要符合 ResponseData 定义的接口标准。</p><pre class="language-java"><code>    <span class="token comment">//JSON有三个域，其中data</span>
    String RES_CODE_FILED<span class="token operator">=</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">;</span>    
    String RES_MSG_FILED<span class="token operator">=</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">;</span>
    String RES_DATA_FILED<span class="token operator">=</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">//处理结果，0标识正常，其他的为错误号  ，具体错误好参见接口中的注释 </span>
    <span class="token keyword">int</span> <span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//处理结果的文字说明</span>
    String <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//返回数据，可以是任何类型数据包括数组，如果返回多个结果可以用Map</span>
    Object <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>这个接口有两个具体的实现ResponseSingleData 和 ResponseMapData，在客户端接受到这个JSON时可以用 ResponseJSON 来解析。框架中JsonResultUtils 类提供了直接向HttpServletResponse写符合上述格式要求的JSON的便捷方法。所以在controller类中可以有多种方式来实现json格式的数据返回。详情可以参见<a href="https://github.com/ndxt/centit-framework/tree/master/framework-adapter/src/main/java/com/centit/framework/common" target="_blank" rel="noopener noreferrer">framework-adapter/common</a>。</p><h2 id="参数驱动sql"><a href="#参数驱动sql" aria-hidden="true" class="header-anchor">#</a> 参数驱动SQL</h2><p>参数驱动sql它是一个sql预处理引擎，他通过条件标签[],外置条件插入标签{}和预处理标签来将对数据库查询的逻辑规则从代码中剥离出来。设计这个参数化驱动sql的主要目标有：</p><ol><li>避免根据输入条件进行复杂的sql语句拼接工作。目标是将前段输入的条件直接转换为Map作为参数驱动sql的参数。</li><li>统一处理数据范围权限包括数据行范围和数据的列范围。</li></ol><p>参数驱动sql语句是基于命名变量语句的，所有参数以&quot;:&quot;+参数名的方式标识。不能用&quot;?&quot;作为参数占位符，也不能用MyBatis的方式。</p><h3 id="条件标签"><a href="#条件标签" aria-hidden="true" class="header-anchor">#</a> 条件标签[]</h3><p>语法: [(条件)(参数列表)| sql语句片段]</p><p>意义是如果“条件”成立，sql语句片段将生效，并将参数列表中的参数加入最终sql语句的参数中，其中参数列表是可选的。</p><p>先介绍一个名词<strong>参数引用描述符</strong>,它是来引用Map参数中变量的。可以直接用名称引用，也可以用value.attr的形式来引用Map中变量的属性。如果Map中的变量名称比较特殊不符合标识符规范比如中文，可以用${变量名称}。</p><p>条件：条件是一个逻辑运算表达式，其中可以直接用参数引用描述符引用参数Map中的变量。</p><p>参数列表：是用“，”分开的多个参数，形式为<strong>参数引用描述符：(预处理指令列表)SQL语句变量名称</strong>;如果参数引用描述符和sql语句变量名称一样，参数引用描述符可以省略。</p><p>举个例子：</p><pre class="language-text"><code>-- Map中有变量 a、b、c、d
-- 参数驱动sql如下：
select [(a&gt;1)| t1.col1, ] t2.col2
from [(a&gt;1)| table1 t1 join ] table2 t2 [(a&gt;1)| on (t1.id=t2.id) ]
where t2.col3&gt; 5 [(a&gt;1 &amp;&amp; b&gt;1)(b:num)| and t1.col3 &gt; :num][ (c&gt;1)(:c) |and t2.col4 &gt; :c ]
[(isnotempty(d))(:(inplace)d)| order by :d desc ]
--如果Map的值为 a:2, b:0 , c:2 , d: 't2.col4' 转换后的语句如下
select t1.col1, t2.col2
from table1 t1 join  table2 t2 on (t1.id=t2.id) 
where t2.col3&gt; 5 and t2.col4 &gt; :c
order by t2.col4 desc 
-- sql与的参数为 c:2
</code></pre><p>如果条件只是判断输入的参数是否为空有则可以将条件省略并且同时需要省略参数列表外层的（）;如果这个参数仅用于判断则参数中的sql语句变量名称也要省略。举个例子：</p><pre class="language-text"><code>-- Map中的变量 a：'4'、user:{name：'先腾'}、c：notnull
select t1.col1, t1.col2
from table1 t1
where 1=1 [:(number)a| and t1.col3&gt;:a] [user.name:name| and t1.name=:name ]
   [c | and t1.col4 not null] [:e| and t1.col5 =:e]
-- 转换后的语句为
select t1.col1, t1.col2
from table1 t1
where 1=1 and t1.col3&gt;:a and t1.name=:name 
    and t1.col4 not null
-- sql与的参数为 a:4 , name:'先腾'
</code></pre><h3 id="外置条件插入标签"><a href="#外置条件插入标签" aria-hidden="true" class="header-anchor">#</a> 外置条件插入标签{}</h3><p>语法：{数据库表名列表}, 多个表名用&quot;,“分隔，表名和别名用空格或者”:&quot;分隔。</p><p>示例：{table1 t1, table2 t2}</p><p>这个标签作用是将针对标签中的表对应的额外的顾虑条件插入到标签所在的位置，现在这个标签只能放在where语句部分。</p><p>外部语句是作为字符串列表来传入的，每个字符串为一个条件语句；条件语句为一个sql语句条件表达式，其中用[表名称.字段名]来指定字段，用{参数引用描述符：(预处理指令列表)SQL语句变量名称}来引用变量，可以是用户相关的变量、环境变量或者前端输入的变量等等。</p><p>举个例子：</p><pre class="language-java"><code>    <span class="token comment">//外部数据范围条件语句</span>
    List<span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">&gt;</span></span> filters <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">&gt;</span></span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    filters<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;[table1.c] like {p1.1:ps}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    filters<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;[table1.b] = {p5}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    filters<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;[table4.b] = {p4}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    filters<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;([table2.f]={p2} and [table3.f]={p3})&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Map<span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">,</span>Object<span class="token punctuation">&gt;</span></span> paramsMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">,</span>Object<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       
    paramsMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;p1.1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    paramsMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;p2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    String queryStatement <span class="token operator">=</span> <span class="token string">&quot;select t1.a,t2.b,t3.c &quot;</span><span class="token operator">+</span>
        <span class="token string">&quot;from table1 t1,table2 t2,table3 t3 &quot;</span><span class="token operator">+</span>
        <span class="token string">&quot;where 1=1 {table1:t1} order by 1,2&quot;</span><span class="token punctuation">;</span>
    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>QueryUtils<span class="token punctuation">.</span><span class="token function">translateQuery</span><span class="token punctuation">(</span>queryStatement<span class="token punctuation">,</span>filters<span class="token punctuation">,</span>paramsMap<span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    结果是：
    select t1<span class="token punctuation">.</span>a<span class="token punctuation">,</span>t2<span class="token punctuation">.</span>b<span class="token punctuation">,</span>t3<span class="token punctuation">.</span>c from table1 t1<span class="token punctuation">,</span>table2 t2<span class="token punctuation">,</span>table3 t3
    where <span class="token number">1</span><span class="token operator">=</span><span class="token number">1</span>  and <span class="token punctuation">(</span>t1<span class="token punctuation">.</span>c like <span class="token operator">:</span>ps <span class="token punctuation">)</span> order by <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span>
</code></pre><p>在实际使用中可以将外置条件配置在数据库中并和具体的操作关联，在配置角色操作时同事指定对应的范围条件，条件中通过{参数引用描述符}应用用户属性。这样在具体的查询时可以获得额外的语句，根据当前用户属性获得对应的参数值。框架中<a href="https://github.com/ndxt/centit-framework-system/blob/master/framework-system-module/src/main/java/com/centit/framework/system/service/impl/GeneralServiceImpl.java" target="_blank" rel="noopener noreferrer">GeneralServiceImpl</a> 可也作为外部条件和用户变量生产示例，具体业务可以模仿这个类来实现。</p><h3 id="参数预处理"><a href="#参数预处理" aria-hidden="true" class="header-anchor">#</a> 参数预处理</h3><p>在参数前面的预处理指令列表可以是多个，预处理会按照顺序执行。预处理的主要作用有：类型转换、查询模式生产、语句替换等等。详细预处理列表参见 <a href="https://github.com/ndxt/centit-commons/blob/master/centit-database/src/main/java/com/centit/support/database/utils/QueryUtils.java" target="_blank" rel="noopener noreferrer">QueryUtils.java</a>。</p><h2 id="数据持久化"><a href="#数据持久化" aria-hidden="true" class="header-anchor">#</a> 数据持久化</h2><h3 id="统一增删改查操作"><a href="#统一增删改查操作" aria-hidden="true" class="header-anchor">#</a> 统一增删改查操作</h3><p>为了照顾绝大部分开发人员，所以框架没有对持久化做严格的限制，<a href="https://github.com/ndxt/centit-persistence" target="_blank" rel="noopener noreferrer">centit-persistence</a>分别对Spring jdbc、Hibernate、MyBatis进行了封装。推荐使用jdbc。框架对持久化封装的目标有：</p><ol><li>用任意持久化框架实现<strong>增删改</strong>，开发人员<strong>都不需要写sql语句</strong>，sping jdbc中做了jpa的简单的实现，所以也无需写sql代码。</li><li><strong>用参数驱动sql执行查询操作</strong>，jdbc直接用sql，Hibernate通过NativeQuery支持sql，Mybatis的Mapper文件中可以直接写sql。对参数驱动sql的支持jdbc和Hibernate都是通过先处理参数驱动sql得到最终的sql再来执行，Mybatis是通过插件来<a href="https://github.com/ndxt/centit-persistence/blob/master/centit-persistence-mybatis/src/main/java/com/centit/framework/mybatis/plugin" target="_blank" rel="noopener noreferrer">ParameterDriverSqlInterceptor</a>来实现的。</li><li>框架还实现了DatabaseOptUtils类，对常用的持久化操作进行封装，比如：调用存储过程，执行sql语句等等。</li></ol><h3 id="数据源"><a href="#数据源" aria-hidden="true" class="header-anchor">#</a> 数据源</h3><p>框架默认只能设置一个数据源，框架<a href="https://github.com/ndxt/centit-persistence/blob/master/centit-persistence-core/src/main/java/com/centit/framework/core/datasource" target="_blank" rel="noopener noreferrer">DynamicDataSource</a>实现动态数据源，配合注解TargetDataSource可以实现数据源的选择。</p><p>如果数据源在开发时是未知的，比如是用户通过界面设定的可以用<a href="https://github.com/ndxt/centit-commons/tree/master/centit-database-datasource" target="_blank" rel="noopener noreferrer">centit-database-datasource</a>中的DbcpConnectPools类来管理链接，用TransactionHandler执行事务。</p><h2 id="mvc分层设计和脚手架"><a href="#mvc分层设计和脚手架" aria-hidden="true" class="header-anchor">#</a> MVC分层设计和脚手架</h2><p>MVC是模型(Model),视图(View)和控制(Controller)的缩写，其目的实现Web系统的职能分工。对应到代码：</p><ol><li>Po持久对象(Persisent Object)，po和数据库中的表意义对应，需要用jpa注解定义映射关系（Mybatis可以用mapper文件定义）。框架没有要求必须有DTO（传送对象）、VO（展示对象）、BO（业务对象），业务系统根据自己的需求进行裁决。</li><li>Dao 对数据库的操作层，负责对数据库进行增删改查操作。一般也po或者数据库表一一对应。</li><li>Services逻辑层，和某一个具体业务对应，一般会和数据库中的一个业务主表对应。数据库事务一般在这个层面上控制，系统用spring来管理事务，spring是通过jdk代理类来管理事务的，所以Services层必须抽象出接口将实现和接口分开。</li><li>Controller 控制层。采用spring mvc框架，用restful风格的接口返回json格式的数据。 由于框架是在这一层控制权限的，所以每个框架需要有一个唯一的ID便于后台维护数据权限时和业务对应。</li><li>View 展示层。展示层有多种实现方式，有些项目还需要支持多种平台（Android、iOS等），将展示层独立出来就是为了应付用户多种需要。</li></ol><p>在信息管理系统或则OA类等先腾的典型业务中的功能模块都会应对到数据库中的一个业务主表，所以我们的设计一般为围绕数据库表结构展开，我们推荐使用powerDesigner来做表结构设计。<a href="https://github.com/ndxt/centit-scaffold" target="_blank" rel="noopener noreferrer">centit-scaffold</a>是一个脚手架工程，他会根据pdm中的表定义和模板文件自动生成前后台代码。生成的代码实现了增删改查功能会对应的页面。开发人员可以根据自己项目的要求编写<a href="https://github.com/ndxt/centit-scaffold/tree/master/src/main/resources" target="_blank" rel="noopener noreferrer">模板</a>。</p><p>这个脚手架目前还没有图形界面的实行，是通过<a href="https://github.com/ndxt/centit-scaffold/blob/master/src/main/resources/scaffoldtask2.xml" target="_blank" rel="noopener noreferrer">一个xml文件</a>来描述生产策略的，通过运行<a href="https://github.com/ndxt/centit-scaffold/blob/master/src/main/java/com/centit/support/scaffold/RunScaffoldTask2.java" target="_blank" rel="noopener noreferrer">RunScaffoldTask2.java</a>来执行转换。</p><p>还有一个类<a href="https://github.com/ndxt/centit-scaffold/blob/master/src/main/java/com/centit/support/scaffold/RunScaffoldTask.java" target="_blank" rel="noopener noreferrer">RunScaffoldTask.java</a>是针对struts版本的，struts处理在遗留项目外已经不允许使用。</p></div><!----><div class="content page-nav"><p class="inner"><!----><span class="next"><a href="/system_design/concept_design.html">
          概念设计
        </a> →
      </span></p></div></div></div></div>
    <script src="/assets/js/1.f4de65d5.js" defer></script><script src="/assets/js/app.a7a3e132.js" defer></script>
  </body>
</html>
