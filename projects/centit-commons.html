<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>南大先腾开源计划 | 基础算法类</title>
    <meta name="description" content="南大先腾开源计划">
    
    <link rel="preload" href="/assets/css/styles.49429c21.css" as="style"><link rel="preload" href="/assets/js/app.49429c21.js" as="script"><link rel="preload" href="/assets/js/2.9bb309d0.js" as="script"><link rel="prefetch" href="/assets/js/1.e1ed89c0.js"><link rel="prefetch" href="/assets/js/0.bb40ecae.js"><link rel="prefetch" href="/assets/js/3.d7d8d861.js"><link rel="prefetch" href="/assets/js/4.df64f0ab.js"><link rel="prefetch" href="/assets/js/5.78f45763.js"><link rel="prefetch" href="/assets/js/6.2213dc10.js"><link rel="prefetch" href="/assets/js/7.9fcf687c.js"><link rel="prefetch" href="/assets/js/8.368ba4d4.js"><link rel="prefetch" href="/assets/js/9.8949a2e4.js"><link rel="prefetch" href="/assets/js/10.350c3b55.js"><link rel="prefetch" href="/assets/js/11.fd49613a.js">
    <link rel="stylesheet" href="/assets/css/styles.49429c21.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/" class="router-link-active"><!----><span class="site-name">
      南大先腾开源计划
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/guide/" class="nav-link">起步</a></div><div class="nav-item"><a href="/environment_structure/" class="nav-link">框架的总体设计</a></div><div class="nav-item"><a href="/projects/" class="nav-link router-link-active">项目介绍</a></div><div class="nav-item"><a href="/UPDATE_LOG.html" class="nav-link">更新记录</a></div><!----></nav></div></header><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/guide/" class="nav-link">起步</a></div><div class="nav-item"><a href="/environment_structure/" class="nav-link">框架的总体设计</a></div><div class="nav-item"><a href="/projects/" class="nav-link router-link-active">项目介绍</a></div><div class="nav-item"><a href="/UPDATE_LOG.html" class="nav-link">更新记录</a></div><!----></nav><ul class="sidebar-links"><li><a href="/projects/" class="sidebar-link">项目介绍</a></li><li><a href="/projects/centit-commons.html" class="active sidebar-link">基础算法类</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/projects/centit-commons.html#通用算法" class="sidebar-link">通用算法</a></li><li class="sidebar-sub-header"><a href="/projects/centit-commons.html#数据库通用算法" class="sidebar-link">数据库通用算法</a></li></ul></li><li><a href="/projects/centit-framework.html" class="sidebar-link">研发框架类</a></li><li><a href="/projects/centit-services.html" class="sidebar-link">服务工具类</a></li></ul></div><div class="page"><div class="content"><h1 id="基础算法类"><a href="#基础算法类" aria-hidden="true" class="header-anchor">#</a> 基础算法类</h1><p>这类目前开源的有很多，比如apache的commons，我们的主要作为一个补充。目前centit-commons项目中主要有几个包：</p><p>1.<strong>centit-utils：</strong> 集合各种通用算法，比如：农历、日期、树形结构、网络、图片、加密等等算法。</p><p>2.<strong>centit-compiler：</strong> 这个包中包括一个词法分析器和一个表达式语法分析器。词法分析可以用于解析字符串，比如sql语句；表达式分析器可以作为一个建议的规则引擎使用。</p><p>3.<strong>centit-database：</strong> 这个包对一些常用的数据库操作进行了封装，内容包括：</p><p>a) 不同数据库的适配。比如：分页、计数等等。</p><p>b) DDL语句。这个一般业务系统是用不到，作为工具开发是比较有用，比如自定义表单。</p><p>c) 数据库的元数据访问。</p><p>d) 以JSON为对象的一个建议的ORM工具类。</p><p>e) 自定义的查询扩展（QueryUtils），对sql进行类扩展，引入类条件语句类似于MyBatis的If语句，和外部过滤条件用于数据权限引擎对数据进行过滤。</p><h2 id="通用算法"><a href="#通用算法" aria-hidden="true" class="header-anchor">#</a> 通用算法</h2><p>这类目前开源的有很多，比如apache的commons，我们的主要作为一个补充。目前centit-utils项目中主要包含通用的算法类，内容主要式公司开发过程中积累的一些通用的算法和模块，其中很多算法式从网络上检索来的。把它们收集在一起主要是为了统一使用方式和减少算法的bug。</p><h3 id="generalalgorithm类"><a href="#generalalgorithm类" aria-hidden="true" class="header-anchor">#</a> GeneralAlgorithm类</h3><p>目前这个类中只有两个方法 nvl 和 nvl2 方法的功能和oracle中的同名方法一样。</p><h3 id="datetimeopt类"><a href="#datetimeopt类" aria-hidden="true" class="header-anchor">#</a> DatetimeOpt类</h3><p>几乎每一个框架都有重写这个类，这个类中的方法比较多，可以归纳为一下几类：</p><ol><li>create* 这类方法式创建一个日期类，不同的方法有不同的参数</li><li>current* 获取当前时间，不同的方法返回不同的类型，可能是 utils.Date、sql.Data、timeStamp等等</li><li>convert* 在土工日期类型、日期和时间 等等之间进行转换</li><li>equal* 判断两个日期在不同时间精度上是否相等，比如是否是同一月、同一天、同一分钟等等。</li><li>calc* 一组关于日期的计算函数，比如：计算两个日期之间的时机差calcSpanDays， 计算两个日期之间的工作日 calcWeekDays， 计算两个日期之间的周末天数 calcWeekendDays，计算一周的第一天和最后一天等等。</li><li>add* 给日期做加减计算，参数为负数就是减。</li><li>get* 获得日期的属性，比如星期几、是一年的第几天、当前时分秒等等。</li><li>seek* 移动到这个月的最后一天、这年的最后一天等等。</li><li>truncate
<em>截取日期到天、周、月等等，和seek</em>
操作相对。</li><li>smartPraseDate 和 castObjectToDate 前者将字符串转换为日期，后者将object转换为日期。</li><li>compareTwoDate 比较两个日期大小 ,避免 发生 NullPointerException 异常。</li></ol><h3 id="lunar类"><a href="#lunar类" aria-hidden="true" class="header-anchor">#</a> Lunar类</h3><p>这个是从网络上检索来的一个计算农历的类。</p><h3 id="listopt类"><a href="#listopt类" aria-hidden="true" class="header-anchor">#</a> ListOpt类</h3><p>对list和array的通用操作，apachecommons和Array、collections有的通用方法都尽量避免重复。主要的方法有：</p><p>关联对象com.centit.support.common.TreeNode。</p><ol><li>sortAsTree* 将list按照树形结构进行排序，这个方式是这个类最重要的一个方法，也是这个类存在的一个原因。</li><li>compareTwoList 比较两个list，将他们相同的、删除的、新增的分别找出来，刚好对应sql的 update、delete和insert操作。</li><li>listToArray 和 arrayToList 通过反射的方式简化了传入的参数。</li><li>remove* 一组对集合元素清理操作。</li><li>moveListItem 和 changeListItem ，前者为移动元素位置两个元素之间的所有item位置都有变化，后者为仅仅交换两个元素的位置</li><li>clone* 复制集合。</li><li>storedAsTree、treeToJSONArray 对属性结构的存储或者序列化。</li></ol><h3 id="numberbaseopt类"><a href="#numberbaseopt类" aria-hidden="true" class="header-anchor">#</a> NumberBaseOpt类</h3><p>和Number相关的通用方法，主要方法有：</p><ol><li>capitalization 将数据转换为大写，用户发票中的大写输出。123.45 - 壹佰贰拾叁点肆伍</li><li>uppercaseCN 将数据转换为中文，比如 2017 - 二〇一七。</li><li>getNumByte 获取数据字符串中某一位上的数值，比如获取十位上的数据参数就传入 2</li><li>castObjectTo* 一组类型转换算法</li><li>compareTwo* 数据之间比较，主要是为了避免 NullPointerException。</li><li>parse* 转换字符串为数值类型， 主要是为了避免 NullPointerException。</li></ol><h3 id="reflectionopt类"><a href="#reflectionopt类" aria-hidden="true" class="header-anchor">#</a> ReflectionOpt类</h3><p>一组反射方面缺失功能的封装。关联对象com.centit.support.common.JavaBeanMetaData</p><ol><li>getSetterMethod 、 getGetterMethod、getAllGetterMethod和getAllSetterMethod 获取对象的getter、setter方法</li><li>getFieldValue、setFieldValue、getBooleanFieldValue、forceGetProperty、forceSetProperty 获取属性和设置属性。</li><li>invoke*Method、invoke*Func 用反射调用方法。</li><li>is* 判断类型，isPrimitiveType 判断一个类型是否是基础类型， isScalarType 判断一个类型是否为标量类型 等等。</li><li>getCurrentMethodName 获取当前方法的名称。</li><li>attainExpressionValue 根据表达式获取属性的值，类似于el表达式。</li><li>createObjectFromMap 根据一个map创建一个对象。和 JavaBeanMetaData 类中的createBeanObjectFromMap 功能相同，但是实现的方式不一样，使用时可以仔细比较一下。</li></ol><h3 id="stringbaseopt类和stringregularopt类。"><a href="#stringbaseopt类和stringregularopt类。" aria-hidden="true" class="header-anchor">#</a> StringBaseOpt类和StringRegularOpt类。</h3><p>StringBaseOpt类中主要是对字符串和字符串数组的操作，StringRegularOpt类主要是对字符串的规则验证。<br>
StringBaseOpt类中需要特别介绍的方法有：</p><ol><li>getFirstLetter 获取中文的拼音的首字母。</li><li>nextCode 获取字符串的下个值。</li><li>castObjectToString 将对象转换为字符串，添加了对null值的特别处理，不会自动转换为“null”。</li></ol><h3 id="表达式编译器"><a href="#表达式编译器" aria-hidden="true" class="header-anchor">#</a> 表达式编译器</h3><p>这个项目中核心的类主要有两个Lexer和VariableFormula。</p><h3 id="lexer"><a href="#lexer" aria-hidden="true" class="header-anchor">#</a> Lexer</h3><p>lexer是一个简单的词法分析器。它的作用是从一个字符串中一个一个读出词，可以设定跳过注射，目前支持两种注释类别java和sql。它的作用就是用于分析一些有语义的字符串，比如从sql中读出所有的字段和条件。</p><h3 id="variableformula"><a href="#variableformula" aria-hidden="true" class="header-anchor">#</a> VariableFormula</h3><p>这是一个支持变量的四则运算，支持括号、逻辑表达式，并且内置了丰富的函数，有点类似Excel中的公式。它的作用就是用于一些规则外置到字符串中。比如：工作流引擎中的业务规则计算。</p><h2 id="数据库通用算法"><a href="#数据库通用算法" aria-hidden="true" class="header-anchor">#</a> 数据库通用算法</h2><p>这个包内容比较多，通过对jdbc的封装实现了对数据的增删改查操作、存储过程的调用、命名参数查询语句的支持、对数据库结构更改的DDL操作。另外它充分考虑的数据库的兼容性（目前仅限MySql、Oracle、DB2、Sql Server、H2）。</p></div><!----><div class="content page-nav"><p class="inner"><span class="prev">
        ← <a href="/projects/" class="prev router-link-active">
          项目介绍
        </a></span><span class="next"><a href="/projects/centit-framework.html">
          研发框架类
        </a> →
      </span></p></div></div></div></div>
    <script src="/assets/js/2.9bb309d0.js" defer></script><script src="/assets/js/app.49429c21.js" defer></script>
  </body>
</html>
