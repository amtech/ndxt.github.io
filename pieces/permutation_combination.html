<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
    <title>动机</title>
    
    
    <link rel="preload" href="/assets/css/53.styles.73c7797a.css" as="style"><link rel="preload" href="/assets/js/app.2b7bf2f1.js" as="script"><link rel="preload" href="/assets/js/28.170fbd88.js" as="script"><link rel="prefetch" href="/assets/js/21.493656e1.js"><link rel="prefetch" href="/assets/js/0.8c6cb2b1.js"><link rel="prefetch" href="/assets/js/1.8d122193.js"><link rel="prefetch" href="/assets/js/2.da38c94d.js"><link rel="prefetch" href="/assets/js/3.7ba6dd4e.js"><link rel="prefetch" href="/assets/js/4.98f99baa.js"><link rel="prefetch" href="/assets/js/5.675307fa.js"><link rel="prefetch" href="/assets/js/6.0e2f11c8.js"><link rel="prefetch" href="/assets/js/7.59d873a0.js"><link rel="prefetch" href="/assets/js/8.606c9271.js"><link rel="prefetch" href="/assets/js/9.a25aea9f.js"><link rel="prefetch" href="/assets/js/10.2e240b38.js"><link rel="prefetch" href="/assets/js/11.69d46380.js"><link rel="prefetch" href="/assets/js/12.8666a845.js"><link rel="prefetch" href="/assets/js/13.fb9fa187.js"><link rel="prefetch" href="/assets/js/14.8cb80df4.js"><link rel="prefetch" href="/assets/js/15.3291b330.js"><link rel="prefetch" href="/assets/js/16.b051d1ed.js"><link rel="prefetch" href="/assets/js/17.a7e106c7.js"><link rel="prefetch" href="/assets/js/18.9d38a6f7.js"><link rel="prefetch" href="/assets/js/19.c5a8b8f0.js"><link rel="prefetch" href="/assets/js/20.b2b2e123.js"><link rel="prefetch" href="/assets/js/22.15a5ad8a.js"><link rel="prefetch" href="/assets/js/23.cd702e46.js"><link rel="prefetch" href="/assets/js/24.f6c597b9.js"><link rel="prefetch" href="/assets/js/25.6b4f6e65.js"><link rel="prefetch" href="/assets/js/26.10a40be6.js"><link rel="prefetch" href="/assets/js/27.cdfdf4a3.js"><link rel="prefetch" href="/assets/js/29.874f2874.js"><link rel="prefetch" href="/assets/js/30.8c2f80d9.js"><link rel="prefetch" href="/assets/js/31.3881f235.js"><link rel="prefetch" href="/assets/js/32.68859a3e.js"><link rel="prefetch" href="/assets/js/33.8bba4ee1.js"><link rel="prefetch" href="/assets/js/34.38351c6b.js"><link rel="prefetch" href="/assets/js/35.4efe87b7.js"><link rel="prefetch" href="/assets/js/36.0a2188a4.js"><link rel="prefetch" href="/assets/js/37.3197e625.js"><link rel="prefetch" href="/assets/js/38.d5a0ea00.js"><link rel="prefetch" href="/assets/js/39.eb7ebd4d.js"><link rel="prefetch" href="/assets/js/40.2b2b571a.js"><link rel="prefetch" href="/assets/js/41.39f09d33.js"><link rel="prefetch" href="/assets/js/42.423da9a7.js"><link rel="prefetch" href="/assets/js/43.91307f1b.js"><link rel="prefetch" href="/assets/js/44.457017c3.js"><link rel="prefetch" href="/assets/js/45.38dd7ecf.js"><link rel="prefetch" href="/assets/js/46.8c8ddb07.js"><link rel="prefetch" href="/assets/js/47.3c660fb3.js"><link rel="prefetch" href="/assets/js/48.2a80bd22.js"><link rel="prefetch" href="/assets/js/49.49314a9f.js"><link rel="prefetch" href="/assets/js/50.8c10f143.js"><link rel="prefetch" href="/assets/js/51.258a80e6.js"><link rel="prefetch" href="/assets/js/52.d4216a4c.js">
    <link rel="stylesheet" href="/assets/css/53.styles.73c7797a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-navbar no-sidebar"><!----><div class="sidebar"><!----><ul class="sidebar-links"><li><a href="/GUIDE.html" class="sidebar-link">/GUIDE.html</a></li><li><a href="/QandA.html" class="sidebar-link">常见问题及解决办法</a></li><li><a href="/" class="sidebar-link">/</a></li><li><a href="/UPDATE_LOG.html" class="sidebar-link">历史更新记录</a></li><li><a href="/pieces/data_drive_sql_1.html" class="sidebar-link">动机</a></li><li><a href="/pieces/data_drive_sql_2.html" class="sidebar-link">动机</a></li><li><a href="/pieces/data_drive_sql_3.html" class="sidebar-link">动机</a></li><li><a href="/pieces/data_drive_sql_4.html" class="sidebar-link">动机</a></li><li><a href="/pieces/framework_1.html" class="sidebar-link">适用场景</a></li><li><a href="/pieces/framework_10.html" class="sidebar-link">/pieces/framework_10.html</a></li><li><a href="/pieces/framework_11.html" class="sidebar-link">/pieces/framework_11.html</a></li><li><a href="/pieces/framework_2.html" class="sidebar-link">概述</a></li><li><a href="/pieces/framework_3.html" class="sidebar-link">概述</a></li><li><a href="/pieces/framework_4.html" class="sidebar-link">概述</a></li><li><a href="/pieces/framework_5.html" class="sidebar-link">概述</a></li><li><a href="/pieces/framework_6.html" class="sidebar-link">/pieces/framework_6.html</a></li><li><a href="/pieces/framework_7.html" class="sidebar-link">/pieces/framework_7.html</a></li><li><a href="/pieces/framework_8.html" class="sidebar-link">/pieces/framework_8.html</a></li><li><a href="/pieces/framework_9.html" class="sidebar-link">/pieces/framework_9.html</a></li><li><a href="/pieces/huan_cun.html" class="sidebar-link">动机</a></li><li><a href="/pieces/lexer_java.html" class="sidebar-link">动机</a></li><li><a href="/pieces/multi_datasource.html" class="sidebar-link">动机</a></li><li><a href="/pieces/page_query_1.html" class="sidebar-link">动机</a></li><li><a href="/pieces/page_query_2.html" class="sidebar-link">动机</a></li><li><a href="/pieces/permutation_combination.html" class="active sidebar-link">动机</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pieces/permutation_combination.html#排列算法" class="sidebar-link">排列算法</a></li><li class="sidebar-sub-header"><a href="/pieces/permutation_combination.html#组合算法" class="sidebar-link">组合算法</a></li><li class="sidebar-sub-header"><a href="/pieces/permutation_combination.html#排列与组合" class="sidebar-link">排列与组合</a></li><li class="sidebar-sub-header"><a href="/pieces/permutation_combination.html#测试代码" class="sidebar-link">测试代码</a></li></ul></li><li><a href="/pieces/sort_as_tree.html" class="sidebar-link">问题</a></li><li><a href="/pieces/spring_jdbc_jpa.html" class="sidebar-link">动机</a></li><li><a href="/projects/" class="sidebar-link">项目总体介绍</a></li><li><a href="/projects/centit-cas.html" class="sidebar-link">单点登录CAS</a></li><li><a href="/projects/centit-compiler.html" class="sidebar-link">表达式编译器</a></li><li><a href="/projects/centit-database.html" class="sidebar-link">数据库通用算法</a></li><li><a href="/projects/centit-dde.html" class="sidebar-link">数据交换工具</a></li><li><a href="/projects/centit-fileserver.html" class="sidebar-link">文件服务器</a></li><li><a href="/projects/centit-framework-cloud.html" class="sidebar-link">框架spring cloud版本</a></li><li><a href="/projects/centit-framework-system.html" class="sidebar-link">框架系统管理平台</a></li><li><a href="/projects/centit-framework.html" class="sidebar-link">研发框架</a></li><li><a href="/projects/centit-integration-platform.html" class="sidebar-link">集成平台</a></li><li><a href="/projects/centit-meta-form.html" class="sidebar-link">自定义表单服务</a></li><li><a href="/projects/centit-msgpusher.html" class="sidebar-link">消息推送服务</a></li><li><a href="/projects/centit-presistence.html" class="sidebar-link">数据库持久化公共类</a></li><li><a href="/projects/centit-scaffold.html" class="sidebar-link">代码脚手架</a></li><li><a href="/projects/centit-search.html" class="sidebar-link">全文检索类</a></li><li><a href="/projects/centit-stat.html" class="sidebar-link">统计报表服务</a></li><li><a href="/projects/centit-ui-easyui.html" class="sidebar-link">基于EasyUI的前段框架</a></li><li><a href="/projects/centit-ui-vue.html" class="sidebar-link">基于Vue的前段框架</a></li><li><a href="/projects/centit-utils.html" class="sidebar-link">基础算法类</a></li><li><a href="/projects/centit-webim.html" class="sidebar-link">即时通讯</a></li><li><a href="/projects/centit-workflow.html" class="sidebar-link">工作流引擎</a></li><li><a href="/projects/centit-workorder.html" class="sidebar-link">工单系统</a></li><li><a href="/system_design/" class="sidebar-link">框架的总体设计</a></li><li><a href="/system_design/concept_design.html" class="sidebar-link">概念设计</a></li><li><a href="/system_design/product_design.html" class="sidebar-link">产品设计</a></li><li><a href="/system_design/technical_design.html" class="sidebar-link">技术路线</a></li></ul></div><div class="page"><div class="content"><h1 id="动机"><a href="#动机" aria-hidden="true" class="header-anchor">#</a> 动机</h1><p>Apache Math包中有很多关分布的算法，但是没有找到排列组合相关的算法。索性自己写一个。排列组合可以分两个算法：</p><ol><li>组合算法，就是在一个数组中取出m（小于等于数组的长度 n）个对象，有多少中不同的取法。不考虑重复元素，组合数应该为 n! / m! / (n-m)! 。</li><li>排列算法，给定一个数据，对这个数组进行排列。如果不考虑相同的元素，排列数应该式n！（n为数组长度），但是算法中需要考虑相同的元素。</li></ol><h1 id="算法"><a href="#算法" aria-hidden="true" class="header-anchor">#</a> 算法</h1><h2 id="排列算法"><a href="#排列算法" aria-hidden="true" class="header-anchor">#</a> 排列算法</h2><p>在<a href="https://blog.csdn.net/code_fan/article/details/81096261" target="_blank" rel="noopener noreferrer">前面的算24点文章</a>用到了排列的算法。排列算法如果用递归实现还是比较容易的，但是考虑到效率的问题算法用回溯法来实现，算法中引入一个消费者方法来处理一个排列，这样避免返回很大的数组，n！是一个很大的数。</p><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics function"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> <span class="token keyword">void</span> <span class="token function">permutation</span><span class="token punctuation">(</span>List<span class="token generics function"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> listSouce <span class="token punctuation">,</span>
                                       Comparator<span class="token operator">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> T<span class="token operator">&gt;</span> comparable<span class="token punctuation">,</span>
                                       Consumer<span class="token operator">&lt;</span>List<span class="token generics function"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span><span class="token operator">&gt;</span> consumer<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">int</span> len <span class="token operator">=</span> listSouce<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>len<span class="token operator">&lt;</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            consumer<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>listSouce<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        listSouce<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>comparable<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//标记排序位置的栈</span>
        List<span class="token generics function"><span class="token punctuation">&lt;</span>Integer<span class="token punctuation">&gt;</span></span> comPos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//标记已经排好序的元素</span>
        List<span class="token generics function"><span class="token punctuation">&lt;</span>Boolean<span class="token punctuation">&gt;</span></span> usedItem <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//记录排序结果</span>
        List<span class="token generics function"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> comRes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>len<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            comPos<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            usedItem<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            comRes<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>null<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        comPos<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> sortIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        usedItem<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>sortIndex <span class="token operator">&gt;=</span><span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
            comRes<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>sortIndex<span class="token punctuation">,</span> listSouce<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span> comPos<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>sortIndex<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span> sortIndex <span class="token operator">==</span> len <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 如果获得一个排序</span>
                <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>usedItem<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">// 将最后一个未使用的添加到排列的最后</span>
                        comRes<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span> sortIndex <span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> listSouce<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">break</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
                consumer<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>comRes<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">//usedItem.set(comPos.get(sortIndex), false);</span>
                <span class="token keyword">while</span><span class="token punctuation">(</span>sortIndex <span class="token operator">&gt;=</span><span class="token number">0</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">//下一个</span>
                    <span class="token keyword">int</span> prePos <span class="token operator">=</span> comPos<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>sortIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    usedItem<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>prePos<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">//当前pos ++ （步进）</span>
                    <span class="token keyword">while</span> <span class="token punctuation">(</span>comPos<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>sortIndex<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span>  <span class="token operator">&lt;</span> len <span class="token operator">&amp;&amp;</span>
                            <span class="token punctuation">(</span> usedItem<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>comPos<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>sortIndex<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">||</span> comparable<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>
                                    listSouce<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>prePos<span class="token punctuation">)</span><span class="token punctuation">,</span>
                                    listSouce<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>comPos<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>sortIndex<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
                    <span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        comPos<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>sortIndex<span class="token punctuation">,</span> comPos<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>sortIndex<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>

                    comPos<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>sortIndex<span class="token punctuation">,</span> comPos<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>sortIndex<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">// 如果已经到上线，继续回退</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>comPos<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>sortIndex<span class="token punctuation">)</span>  <span class="token operator">&lt;</span> len <span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token comment">//重新计算下个列表</span>
                        usedItem<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>comPos<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>sortIndex<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        comRes<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span> sortIndex<span class="token punctuation">,</span> listSouce<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>comPos<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>sortIndex<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">break</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span> <span class="token comment">// 回退</span>
                        sortIndex<span class="token operator">--</span><span class="token punctuation">;</span>
                        <span class="token comment">//comPos.set(sortIndex, comPos.get(sortIndex) + 1);</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">// 下一个</span>
                <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>usedItem<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                        comPos<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>sortIndex <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        usedItem<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">break</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
                sortIndex<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre><h2 id="组合算法"><a href="#组合算法" aria-hidden="true" class="header-anchor">#</a> 组合算法</h2><p>组合算法比排列简单一点，重点式考虑重复元素的问题，和排列一样，先对数组进行排序。同样引入一个消费者方法来处理一个给点的组合，组合也是一个很大的数，不能直接返回数组。</p><pre class="language-java"><code> <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics function"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> <span class="token keyword">void</span> <span class="token function">combination</span><span class="token punctuation">(</span>List<span class="token generics function"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> listSouce <span class="token punctuation">,</span> <span class="token keyword">int</span> selected<span class="token punctuation">,</span>
                                       Comparator<span class="token operator">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> T<span class="token operator">&gt;</span> comparable<span class="token punctuation">,</span>
                                       Consumer<span class="token operator">&lt;</span>List<span class="token generics function"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span><span class="token operator">&gt;</span> consumer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> len <span class="token operator">=</span> listSouce<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>len<span class="token operator">&lt;</span>selected <span class="token operator">||</span> selected <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>len <span class="token operator">==</span> selected<span class="token punctuation">)</span><span class="token punctuation">{</span>
            consumer<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>listSouce<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        listSouce<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>comparable<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//标记排序位置的栈</span>
        List<span class="token generics function"><span class="token punctuation">&lt;</span>Integer<span class="token punctuation">&gt;</span></span> selectPos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>selected<span class="token punctuation">)</span><span class="token punctuation">;</span>
        List<span class="token generics function"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> comRes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>selected<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>selected<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            selectPos<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            comRes<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>listSouce<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">int</span> sortIndex <span class="token operator">=</span> selected<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>sortIndex <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>sortIndex <span class="token operator">==</span> selected<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                consumer<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>comRes<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">while</span><span class="token punctuation">(</span>selectPos<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>sortIndex<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span>  <span class="token operator">&lt;</span> len <span class="token operator">&amp;&amp;</span> comparable<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>
                    listSouce<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>selectPos<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>sortIndex<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    listSouce<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>selectPos<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>sortIndex<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                selectPos<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>sortIndex<span class="token punctuation">,</span> selectPos<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>sortIndex<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            selectPos<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>sortIndex<span class="token punctuation">,</span> selectPos<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>sortIndex<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>selectPos<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>sortIndex<span class="token punctuation">)</span>  <span class="token operator">&lt;=</span> len <span class="token operator">-</span> selected <span class="token operator">+</span> sortIndex <span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//重新计算下个列表</span>
                comRes<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>sortIndex<span class="token punctuation">,</span> listSouce<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span> selectPos<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>sortIndex<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">int</span> startPos <span class="token operator">=</span> selectPos<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>sortIndex<span class="token punctuation">)</span> <span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> sortIndex<span class="token operator">+</span><span class="token number">1</span> <span class="token punctuation">;</span> i <span class="token operator">&lt;</span> selected<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    selectPos<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> startPos<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    comRes<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> listSouce<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>startPos<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    startPos <span class="token operator">++</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                sortIndex <span class="token operator">=</span> selected<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
                <span class="token comment">//continue;</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span> <span class="token comment">// 回退</span>
                sortIndex<span class="token operator">--</span><span class="token punctuation">;</span>
                <span class="token comment">//comPos.set(sortIndex, comPos.get(sortIndex) + 1);</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre><h2 id="排列与组合"><a href="#排列与组合" aria-hidden="true" class="header-anchor">#</a> 排列与组合</h2><p>排列组合就是简单对两个方法整合一下。</p><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics function"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> <span class="token keyword">void</span> <span class="token function">permutationAndCombination</span><span class="token punctuation">(</span>List<span class="token generics function"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> listSouce <span class="token punctuation">,</span> <span class="token keyword">int</span> selected<span class="token punctuation">,</span>
                                       Comparator<span class="token operator">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> T<span class="token operator">&gt;</span> comparable<span class="token punctuation">,</span>
                                       Consumer<span class="token operator">&lt;</span>List<span class="token generics function"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span><span class="token operator">&gt;</span> consumer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">combination</span><span class="token punctuation">(</span>listSouce <span class="token punctuation">,</span> selected<span class="token punctuation">,</span> comparable<span class="token punctuation">,</span>
                <span class="token punctuation">(</span> oneCom <span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token function">permutation</span><span class="token punctuation">(</span>oneCom<span class="token punctuation">,</span> comparable<span class="token punctuation">,</span>  consumer<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><h2 id="测试代码"><a href="#测试代码" aria-hidden="true" class="header-anchor">#</a> 测试代码</h2><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MathOpt</span> <span class="token punctuation">{</span>
    <span class="token comment">//将 数字和操作排序</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">sortFormulaOpt</span><span class="token punctuation">(</span> List<span class="token generics function"><span class="token punctuation">&lt;</span>Integer<span class="token punctuation">&gt;</span></span> rList <span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span>Integer i <span class="token operator">:</span> rList<span class="token punctuation">)</span><span class="token punctuation">{</span>
            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String arg<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException <span class="token punctuation">{</span>

        BufferedReader br <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;输入用空格隔开整数，推出输入exit&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            String s <span class="token operator">=</span> br<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>StringUtils<span class="token punctuation">.</span><span class="token function">isBlank</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">continue</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>StringUtils<span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span><span class="token string">&quot;exit&quot;</span><span class="token punctuation">,</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">int</span> nSelect <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
            String<span class="token punctuation">[</span><span class="token punctuation">]</span> nums <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            List<span class="token generics function"><span class="token punctuation">&lt;</span>Integer<span class="token punctuation">&gt;</span></span> alist <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>StringRegularOpt<span class="token punctuation">.</span><span class="token function">isNumber</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">if</span><span class="token punctuation">(</span> nSelect <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
                        nSelect <span class="token operator">=</span> NumberBaseOpt<span class="token punctuation">.</span><span class="token function">castObjectToInteger</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
                        alist<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>NumberBaseOpt<span class="token punctuation">.</span><span class="token function">castObjectToInteger</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">if</span><span class="token punctuation">(</span> alist<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">continue</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            Mathematics<span class="token punctuation">.</span><span class="token function">permutationAndCombination</span><span class="token punctuation">(</span>
                    alist<span class="token punctuation">,</span>nSelect<span class="token punctuation">,</span> Integer<span class="token operator">:</span><span class="token operator">:</span>compare<span class="token punctuation">,</span> MathOpt<span class="token operator">:</span><span class="token operator">:</span>sortFormulaOpt
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><h1 id="源码"><a href="#源码" aria-hidden="true" class="header-anchor">#</a> 源码</h1><p><a href="https://github.com/ndxt/centit-commons/blob/master/centit-utils/src/main/java/com/centit/support/algorithm/Mathematics.java" target="_blank" rel="noopener noreferrer">排列组合相关的源码</a>;更多南大先腾开源项目参见<a href="https://ndxt.github.io/" target="_blank" rel="noopener noreferrer">https://ndxt.github.io/</a>。</p></div><!----><div class="content page-nav"><p class="inner"><span class="prev">
        ← <a href="/pieces/page_query_2.html" class="prev">
          动机
        </a></span><span class="next"><a href="/pieces/sort_as_tree.html">
          问题
        </a> →
      </span></p></div></div></div></div>
    <script src="/assets/js/28.170fbd88.js" defer></script><script src="/assets/js/app.2b7bf2f1.js" defer></script>
  </body>
</html>
